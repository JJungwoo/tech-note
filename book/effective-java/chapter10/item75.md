# 예외의 상세 메시지에 실패 관련 정보를 담으라

예외를 잡지 못해 프로그램이 실패하면 자바 시스템은 그 예외의 스택 추적(stack trace) 정보를 자동으로 출력한다.

스택 추적 정보는 보통 예외의 클래스 이름 뒤에 상세 메시지가 붙는 형태이다.

상세 메시지에는 예외가 발생한 파일 이름과 줄 번호는 물론 스택에서 호출한 다른 메서드들의 파일 이름과 줄 번호까지 정확히 기록되어 있다.

### 예외의 상세 메시지는 최대한 예외에 관련된 모든 정보를 담아야 한다

예외 상황을 다시 재현하기 어렵거나 불가능할 때가 있기 때문에 예외 발생 시 실패 원인에 대한 정보를 최대한 많이 담아서 반환해야 한다.

이후 분석을 위해서 **실패 순간을 정확히 포착하려면 발생한 예외에 관여된 모든 매개변수와 필드의 값을 실패 메시지에 담아야 한다.**
>상세 메시지에 비밀번호나 암호키 정보는 담아서는 안되고 보안과 관련된 정보는 주의해서 다뤄야 한다.

### 예외의 상세 메시지와 최종 사용자에게 보여줄 오류 메시지를 혼동해서는 안 된다

최종 사용자에게는 친절한 안내 메시지를 보여줘야 하는 반면, 예외 메시지는 가독성보다는 필요한 정보를 모두 받아서 제공해야 한다.

### 실패를 적절히 포착하려면 필요한 정보를 예외 생성자에서 모두 받아 상세 메시지까지 미리 생성해 놓는 방법도 있다

```java
    /**
     * IndexOutOfBoundsException을 생성한다
     * @param lowerBound 인덱스의 최솟값
     * @param upperBound 인덱스의 최댓값 + 1
     * @param index 인덱스의 실젯값
     */
   public IndexOutOfBoundsException(int lowerBound, int upperBound, int index){
        // 실패를 포착하는 상세 메시지를 생성한다.
       super(String.format("최솟값: %d , 최댓값: %d, 인덱스: %d"
                , lowerBound, upperBound, index));

       // 프로그램에서 이용할 수 있도록 실패 정보를 저장해둔다.
       this.lowerBound = lowerBound;
       this.upperBound = upperBound;
       this.index = index;
}
```

# 핵심 정리

- 실패 순간의 상황에 대한 최대한 많은 정보들을 예외의 toString 메서드에 담아 반환해라
- 예외 메시지는 상황에 따라 받는 사용자에 따라 알맞는 정보를 제공하자(사용자 정의 예외 클래스) 

